(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{188:function(e,t,n){e.exports=n(400)},310:function(e,t){},326:function(e,t){},328:function(e,t){},338:function(e,t,n){},339:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var a,c=n(0),o=n.n(c),i=n(6),l=n.n(i),r=n(79),u=n(37),s=n(407),d=n(405),f=n(408),m=n(404),g=n(409),b=n(99),h=n(410),p=n(406),v=n(34),y=n(411),E=n(403),k=n(412),O=n(165),j=n(166),x=n.n(j),C=n(113),D=n.n(C),w=(n(336),n(337),n(338),n(163)),S=n(161),T=n(162),I=n(164),B=n(112);n(339);function R(e){var t=e.icon,n=e.setIcon;if(e.blocked)n(void 0);else if(t){var a=B[t];return setTimeout((function(){n(void 0)}),2e3),o.a.createElement("div",{className:"like"},o.a.createElement(a,null))}return o.a.createElement(o.a.Fragment,null)}function F(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)(),j=Object(u.a)(l,2),C=j[0],B=j[1],F=Object(c.useState)(),N=Object(u.a)(F,2),A=N[0],M=N[1],H=Object(c.useState)(!1),K=Object(u.a)(H,2),P=K[0],z=K[1],J=Object(c.useState)(),L=Object(u.a)(J,2),U=L[0],G=L[1],W=Object(c.useState)(),q=Object(u.a)(W,2),Q=q[0],V=q[1],X=Object(c.useState)([{title:"RealTalk - BOT",position:"left",type:"text",text:"Ch\xe0o m\u1eebng \u0111\u1ebfn v\u1edbi RealTalk!",date:new Date}]),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],_=Object(c.useState)(),ee=Object(u.a)(_,2),te=ee[0],ne=ee[1],ae=Object(c.useState)(),ce=Object(u.a)(ae,2),oe=ce[0],ie=ce[1],le=Object(c.useState)(!1),re=Object(u.a)(le,2),ue=re[0],se=re[1],de=Object(c.useRef)(),fe=Object(c.useRef)();function me(){z(!0);var e=new D.a({initiator:!1,trickle:!1,stream:n});e.on("signal",(function(e){a.emit("accept",{to:null===Q||void 0===Q?void 0:Q.id,signal:e})})),e.on("stream",(function(e){s.b.success("K\u1ebft n\u1ed1i th\xe0nh c\xf4ng!"),fe.current.srcObject=e,$((function(e){return[].concat(Object(r.a)(e),[{title:"RealTalk - BOT",position:"left",type:"text",text:"".concat(null===Q||void 0===Q?void 0:Q.id," \u0111\xe3 tham gia cu\u1ed9c g\u1ecdi. H\xe3y th\u1eed tr\xf2 chuy\u1ec7n v\u1edbi nhau!"),date:new Date}])}))})),e.signal(null===Q||void 0===Q?void 0:Q.signal),a.on("endCall",(function(){s.b.error("Cu\u1ed9c g\u1ecdi \u0111\xe3 k\u1ebft th\xfac"),a.off("endCall"),V(void 0),z(!1),e.destroy()}))}function ge(){a.emit("decline",{to:null===Q||void 0===Q?void 0:Q.id,from:C})}function be(e){ie(e),a.emit("emotion",{to:(null===Q||void 0===Q?void 0:Q.id)||A,icon:e})}return Object(c.useEffect)((function(){a=x()("http://localhost:3001"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){i(e),de.current.srcObject=e})),a.on("myID",(function(e){B(e)})),a.on("notFound",(function(e){console.log("Not found ID",e),s.b.error("Kh\xf4ng t\xecm th\u1ea5y ID")})),a.on("message",(function(e){var t=e.from,n=e.message;$((function(e){return[].concat(Object(r.a)(e),[{title:t,position:"left",type:"text",text:n,date:new Date}])}))})),a.on("emotion",(function(e){ie(e)}))}),[]),Object(c.useEffect)((function(){a.on("rang",(function(e){var t=e.signal,n=e.from;console.log({callAccepted:P}),P?(console.log("busy from",n),a.emit("busy",{to:n,from:C})):(G(!0),V({id:n,signal:t}))}))}),[P]),Object(c.useEffect)((function(){Q&&U&&!P&&d.a.confirm({title:"Cu\u1ed9c g\u1ecdi t\u1eeb ".concat(null===Q||void 0===Q?void 0:Q.id),okText:"Ch\u1ea5p nh\u1eadn",onOk:me,cancelText:"T\u1eeb ch\u1ed1i",onCancel:ge})}),[Q]),navigator.mediaDevices||navigator.mediaDevices.getUserMedia?o.a.createElement("div",null,o.a.createElement(m.a,{title:"RealTalk",style:{boxShadow:"0px 1px 5px gray"}}),o.a.createElement(g.a,null,o.a.createElement(b.a,{title:"Nh\u1ea5n \u0111\u1ec3 sao ch\xe9p",placement:"right"},o.a.createElement("div",{style:{margin:"20px auto",fontSize:"20px",fontWeight:"bold"}},"M\xe3 ID: ",o.a.createElement(h.a,{onClick:function(){navigator.clipboard.writeText(C).then((function(){s.b.success("\u0110\xe3 sao ch\xe9p")}))},style:{padding:"10px 20px",fontSize:22,cursor:"pointer"}},C)))),o.a.createElement(g.a,null,o.a.createElement("div",{style:{width:400,margin:"0px auto"}},o.a.createElement(p.a,{placeholder:"Nh\u1eadp ID...",style:{margin:"10px 0"},onChange:function(e){return M(e.target.value)},value:A}),o.a.createElement(v.a,{style:{margin:"10px 0"},block:!0,type:"primary",onClick:function(){if(A!==C){var e=new D.a({initiator:!0,trickle:!1,stream:n}),t=s.b.loading("\u0110ang g\u1ecdi...",0);e.on("signal",(function(e){a.emit("call",{to:A,signal:e,from:C})})),e.on("stream",(function(e){s.b.success("K\u1ebft n\u1ed1i th\xe0nh c\xf4ng!"),fe.current.srcObject=e,$((function(e){return[].concat(Object(r.a)(e),[{title:"RealTalk - BOT",position:"left",type:"text",text:"".concat(A," \u0111\xe3 tham gia cu\u1ed9c g\u1ecdi. H\xe3y th\u1eed tr\xf2 chuy\u1ec7n v\u1edbi nhau!"),date:new Date}])}))})),a.on("busy",(function(n){t(),s.b.error("".concat(n," \u0111ang b\u1eadn!")),a.off("busy"),a.off("callDeclined"),a.off("callAccepted"),a.off("endCall"),e.destroy()})),a.on("callAccepted",(function(n){t(),z(!0),e.signal(n)})),a.on("callDeclined",(function(n){t(),s.b.error("".concat(n," \u0111\xe3 t\u1eeb ch\u1ed1i cu\u1ed9c g\u1ecdi")),a.off("busy"),a.off("callDeclined"),a.off("callAccepted"),a.off("endCall"),e.destroy()})),a.on("endCall",(function(){s.b.error("Cu\u1ed9c g\u1ecdi \u0111\xe3 k\u1ebft th\xfac"),a.off("busy"),a.off("callDeclined"),a.off("callAccepted"),a.off("endCall"),M(void 0),z(!1),e.destroy()}))}else s.b.error("M\xe3 ID kh\xf4ng \u0111\u01b0\u1ee3c h\u1ee3p l\u1ec7")}},"G\u1ecdi"),P&&o.a.createElement(v.a,{block:!0,type:"danger",onClick:function(){z(!1),a.emit("end",{to:(null===Q||void 0===Q?void 0:Q.id)||A,from:C})}},"K\u1ebft th\xfac"))),o.a.createElement(g.a,null,o.a.createElement(y.a,{span:8,style:{padding:10}},o.a.createElement("video",{style:{width:"100%",height:250,background:"black"},autoPlay:!0,ref:de}),o.a.createElement("div",null,o.a.createElement(O.MessageList,{className:"message-list",lockable:!0,toBottomHeight:300,dataSource:Z}),o.a.createElement(p.a,{placeholder:"Nh\u1eadp tin nh\u1eafn...",value:te,onChange:function(e){return ne(e.target.value)},onPressEnter:function(e){return t=e.target.value,a.emit("send",{to:(null===Q||void 0===Q?void 0:Q.id)||A,from:C,message:t}),$((function(e){return[].concat(Object(r.a)(e),[{title:"B\u1ea1n",position:"right",type:"text",text:t,date:new Date}])})),void ne("");var t},allowClear:!0,style:{margin:"10px 0"}}),o.a.createElement(E.a,null,o.a.createElement(v.a,{icon:o.a.createElement(w.a,null),onClick:function(){return be("LikeFilled")}}),o.a.createElement(v.a,{icon:o.a.createElement(S.a,null),onClick:function(){return be("DislikeFilled")}}),o.a.createElement(v.a,{icon:o.a.createElement(T.a,null),onClick:function(){return be("HeartFilled")}}),o.a.createElement(v.a,{icon:o.a.createElement(I.a,null),onClick:function(){return be("SmileFilled")}})),o.a.createElement(k.a,{style:{display:"block",margin:"10px 0"},checkedChildren:"Bi\u1ec3u c\u1ea3m \u0111ang b\u1eadt",unCheckedChildren:"Bi\u1ec3u c\u1ea3m \u0111ang t\u1eaft",defaultChecked:!0,onChange:function(e){return se(!e)}}))),o.a.createElement(y.a,{span:16,style:{padding:"10px 10px 10px 0"}},o.a.createElement("video",{style:{width:"100%",height:"90vh",background:"black"},autoPlay:!0,ref:fe}))),o.a.createElement(R,{icon:oe,setIcon:ie,blocked:ue})):o.a.createElement(f.a,{status:"500",title:"Tr\xecnh duy\u1ec7t kh\xf4ng t\u01b0\u01a1ng th\xedch!"})}l.a.render(o.a.createElement(F,null),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.e5062697.chunk.js.map